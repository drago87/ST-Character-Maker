{"version":2,"name":"CMC Logic","disableSend":false,"placeBeforeInput":false,"injectInput":false,"color":"rgba(0, 0, 0, 0)","onlyBorderColor":false,"qrList":[{"id":2,"icon":"","showLabel":false,"label":"Get Char info","title":"","message":"/db-list source=chat field=name |\n/let key=databaseList {{pipe}}|\n/ife ( 'first_name' in databaseList){:\n\t/db-get source=chat first_name| /setvar key=firstName {{pipe}}|\n:}|\n/ife ( 'last_name' in databaseList){:\n\t/db-get source=chat last_name| /setvar key=lastName {{pipe}}|\n:}|\n/ife ( 'age' in databaseList){:\n\t/db-get source=chat age| /setvar key=age {{pipe}}|\n:}|\n/ife ( 'human_equivalent_age' in databaseList){:\n\t/db-get source=chat human_equivalent_age| /setvar key=human_equivalent_age {{pipe}}|\n:}|\n/ife ( 'species' in databaseList){:\n\t/db-get source=chat species| /setvar key=species {{pipe}}|\n:}|\n/ife ( 'normal_form' in databaseList){:\n\t/db-get source=chat normal_form| /setvar key=normal_form {{pipe}}|\n:}|\n/ife ( 'type' in databaseList){:\n\t/db-get source=chat type| /setvar key=type {{pipe}}|\n:}|\n/ife ( 'speciesType' in databaseList){:\n\t/db-get source=chat speciesType| /setvar key=speciesType {{pipe}}|\n:}|\n/ife ( 'character_type' in databaseList){:\n\t/db-get source=chat character_type| /setvar key=character_type {{pipe}}|\n:}|\n/ife ( 'real' in databaseList){:\n\t/db-get source=chat real| /setvar key=real {{pipe}}|\n:}|\n/ife ( 'media_type' in databaseList){:\n\t/db-get source=chat media_type| /setvar key=media_type {{pipe}}|\n:}|\n/ife ( 'media_name' in databaseList){:\n\t/db-get source=chat media_name| /setvar key=media_name {{pipe}}|\n:}|\n\n\n/ife ( human_equivalent_age != 'none') {:\n\t/let key=parcedAge {{getvar::age}} — roughly {{getvar::human_equivalent_age}} in human years.|\n:}|\n\n/ife (character_type == 'none'){:\n\t/setvar key=character_type {{noop}}|\n:}|\n/ife ( normal_form == species ) {:\n    /let key=parsedSpecies {{getvar::species}}|\n:}|\n/else {:\n\t/ife ( character_type != ''){:\n\t\t/let key=parsedSpecies \"{{getvar::normal_form}} {{getvar::species}} {{getvar::character_type}}\"|\n\t:}|\n\t/else {:\n\t\t/let key=parsedSpecies \"{{getvar::normal_form}} {{getvar::species}}\"|\n\t:}|\n:}|\n\n/ife ( real == 'Yes') {:\n\t/let key=realParced {{newline}}- Origin: {{getvar::media_type}} – {{getvar::media_name}}|\n:}|","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":4,"icon":"","showLabel":false,"label":"Is Real","title":"","message":"/buttons labels=[\"Yes\", \"No\"] Is the character you are making a \"real\" character from a game/anime/book etc..?|\n/setvar key=real {{pipe}}|\n/ife ( real == ''){:\n\t/echo Aborting | /ife ( quickRoll == 'Yes' ) {: /setvar key=debug {{getvar::tempDebug}}| :}| /:\"CMC Logic.Flushvar\"|\n:}|\n/elseif ( real == 'Yes') {:\n\t/input rows=8 What is the first name of the character?|\n\t/setvar key=fname {{pipe}}|\n\t/ife ( fname == ''){:\n\t\t/echo Aborting | /ife ( quickRoll == 'Yes' ) {: /setvar key=debug {{getvar::tempDebug}}| :}| /:\"CMC Logic.Flushvar\"|\n\t:}|\n\t/else {::}|\n\n\t/input rows=8 What is the last name of {{getvar::fname}}?|\n\t/setvar key=lname {{pipe}}|\n\t/ife ( lname == ''){:\n\t\t/echo Aborting | /ife ( quickRoll == 'Yes' ) {: /setvar key=debug {{getvar::tempDebug}}| :}| /:\"CMC Logic.Flushvar\"|\n\t:}|\n\t/else {::}|\n\n\t/input rows=8 What is the media of {{getvar::fname}}?|\n\t/setvar key=media {{pipe}}|\n\t/ife ( media == ''){:\n\t\t/echo Aborting | /ife ( quickRoll == 'Yes' ) {: /setvar key=debug {{getvar::tempDebug}}| :}| /:\"CMC Logic.Flushvar\"|\n\t:}|\n\t/else {::}|\n\n\t/input rows=8 What is the name of the {{getvar::media}} that {{getvar::fname}} is in?|\n\t/setvar key=mediaName {{pipe}}|\n\t/ife ( mediaName == ''){:\n\t\t/echo Aborting | /ife ( quickRoll == 'Yes' ) {: /setvar key=debug {{getvar::tempDebug}}| :}| /:\"CMC Logic.Flushvar\"|\n\t:}|\n\t/else {::}|\n\n\t\n\t/db-list source=chat field=name |\n\t/setvar key=a {{pipe}}|\n\t/ife ( 'real' not in a){:\n\t\t/db-add source=chat name=real {{getvar::real}}| /db-disable source=chat real|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=real {{getvar::real}}| /db-disable source=chat real|\n\t:}|\n\t/ife ( 'first_name' not in a){:\n\t\t/db-add source=chat name=first_name {{getvar::fname}}| /db-disable source=chat first_name|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=first_name {{getvar::fname}}| /db-disable source=chat first_name|\n\t:}|\n\t/ife ( 'last_name' not in a){:\n\t\t/db-add source=chat name=last_name {{getvar::lname}}| /db-disable source=chat last_name|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=last_name {{getvar::lname}}| /db-disable source=chat last_name|\n\t:}|\n\t/ife ( 'media_type' not in a){:\n\t\t/db-add source=chat name=media_type {{getvar::media}}| /db-disable source=chat media_type|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=media_type {{getvar::media}}| /db-disable source=chat media_type|\n\t:}|\n\t/ife ( 'media_name' not in a){:\n\t\t/db-add source=chat name=media_name {{getvar::mediaName}}| /db-disable source=chat media_name|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=media_name {{getvar::mediaName}}| /db-disable source=chat media_name|\n\t:}|\n:}|\n/else {:\n\t/db-list source=chat field=name |\n\t/setvar key=a {{pipe}}|\n\n\t/ife ( 'real' not in a){:\n\t\t/db-add source=chat name=real {{getvar::real}}|\n\t\t/db-disable source=chat real|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=real {{getvar::real}}| /db-disable source=chat real|\n\t:}|\n\t/ife ( 'media_type' not in a){:\n\t\t/db-add source=chat name=media_type None|\n\t\t/db-disable source=chat media_type|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=media_type None| /db-disable source=chat media_type|\n\t:}|\n\t/ife ( 'media_name' not in a){:\n\t\t/db-add source=chat name=media_name None|\n\t\t/db-disable source=chat media_name|\n\t:}|\n\t/else {:\n\t\t/db-update source=chat name=media_name None| /db-disable source=chat media_name|\n\t:}|\n:}|\n","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":6,"icon":"","showLabel":false,"label":"SaveGen","title":"","message":"/let SaveGen {: input=\n\t/ife ( input == ''){:\n\t\t//[[FlushVar]]|\n\t\t/echo Aborting | /ife ( quickRoll == 'Yes' ) {: /setvar key=debug {{getvar::tempDebug}}| :}| /:\"CMC Logic.Flushvar\"|\n\t:}|\n\t/let x {{var::input}}|\n\t/ife ( input == 'Done') {:\n\t\t/setvar key=output {{getvar::tempList}}|\n\t:}|\n\t/elseif ( isGeneration == 'Yes') {:\n\t\t/ife ( outputIsList == 'Yes) {:\n\t\t\t/ife ( inputIsList == 'Yes') {:\n\t\t\t\t/addvar key=tempList {{getvar::item}}: {{getvar::input}}|\n\t\t\t:}|\n\t\t\t/else {:\n\t\t\t\t/addvar key=tempList {{getvar::input}}|\n\t\t\t:}|\n\t\t:}|\n\t\t/else {:\n\t\t\t/ife ( inputIsList == 'Yes') {:\n\t\t\t\t/setvar key=output {{getvar::item}}: {{getvar::input}}|\n\t\t\t:}|\n\t\t\t/eslse {:\n\t\t\t\t/setvar key=output {{getvar::input}}|\n\t\t\t:}|\n\t\t:}|\n\t:}|\n\t/else {:\n\t\t/ife (outputIsList == 'Yes') {:\n\t\t\t/addvar key=tempList {{getvar::input}}|\n\t\t:}|\n\t\t/else {:\n\t\t\t/setvar key=output {{getvar::input}}|\n\t\t:}|\n\t:}|\n:}||","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":8,"icon":"","showLabel":false,"label":"Combine List Lorebooks","title":"","message":"/wi-list-entries \"{{var::wi_book}}\"|\n/var key=wi_temp {{pipe}}|\n/map {{pipe}} {:\n    /getat index=entries {{var::item}} |\n    /map {{pipe}} {:\n        /getat index=comment {{var::item}}\n    :}\n:} |\n/setvar key=wi_input_entreis {{pipe}}|\n/wait {{getvar::wait}}|\n/getat index=0 {{var::wi_input_entreis}}|\n/var key=wi_input_entreis {{pipe}}|\n/map {{var::wi_temp}} {:\n    /getat index=entries {{var::item}} |\n    /map {{pipe}} {:\n        /getat index=content {{var::item}}\n    :}\n:} |\n/var key=wi_input_content {{pipe}}|\n/wait {{getvar::wait}}|\n/getat  index=0 {{var::wi_input_content}}|\n/var key=wi_input_content {{pipe}}|\n\n/var key=workingList1 {{getvar::wi_input_entreis}}|\n/len {{var::wi_input_entreis}}|\n/var key=workingList1 index={{pipe}} Done|\n/var key=workingList2 {{getvar::wi_input_content}}|\n\n/var as=array key=genOrder []|\n/var as=array key=genOrderContent []|\n\n/var key=selected_btn {{noop}}|\n/whilee (selected_btn != 'Done') {:\n  /buttons labels={{var::workingList1}} Select what and in what order you want the characters information to be selected. Press done when you are happy|\n  /var key=selected_btn {{pipe}}|\n\n  /ife ( selected_btn == ''){:\n\t/echo Aborting |\n\t/break\n  :}|\n  /elseif ( selected_btn == 'Done') {:\n    /pop workingList1|\n  :}|\n  /else {:\n    /re-replace find=\"/\\b(?:Female\\|Male\\|Both)\\s/\" replace=\"\" {{var::selected_btn}}|\n    /var key=parcedInput {{pipe}}|\n    /ife (parcedInput in genOrder) {:\n      /find index=true {{var::workingList1}} {:\n        /test left={{var::item}} rule=eq right={{var::selected_btn}}|\n      :}|\n      /var key=workingIndex {{pipe}}|\n      /getat index={{var::workingIndex}} {{var::workingList2}}|\n      /var key=workingContent2 {{pipe}}|\n      /find index=true {{var::genOrder}} {:\n        /test left={{var::item}} rule=eq right={{var::parcedInput}}|\n      :}|\n      /var key=genOrderindex {{pipe}}|\n      \n      /getat index={{var::genOrderindex}} {{var::genOrderContent}}|\n      /var key=parce1 {{pipe}}|\n      /var key=parce2 {{var::workingContent2}}|\n      /split find=\":\" {{var::parce1}}|\n      /var key=parce1 {{pipe}}|\n      /split find=\":\" {{var::parce2}}|\n      /setvar key=parce2 {{pipe}}|\n      \n      /foreach {{var::parce1}} {:\n      \t/var key=it {{var::item}}|\n        /ife (it in parce2) {:\n          /find index=true {{var::parce2}} {:\n            /test left={{var::item}} rule=eq right={{var::it}}|\n          :}|\n          /splice start={{pipe}} delete=1 {{var::parce2}}|\n          /var key=parce2 {{pipe}}|\n        :}|\n      :}|\n      /join glue=\":{{space}}\" {{var::parce1}}|\n      /var key=parce1 {{pipe}}|\n      /join glue=\":{{space}}\" {{var::parce2}}|\n      /var key=parce2 {{pipe}}|\n      /var key=genOrderContent index={{var::genOrderindex}} {{var::parce1}}: {{var::parce2}}|\n    :}|\n    /else {:\n      /find index=true {{var::workingList1}} {:\n        /test left={{var::item}} rule=eq right={{var::selected_btn}}|\n      :}|\n      /var key=workingIndex {{pipe}}|\n      /len {{var::genOrder}}\n      /var key=genOrder index={{pipe}} {{getvar::parcedInput}}|\n      /var key=workingList2 index={{var::workingIndex}}|\n      /var key=t {{pipe}}|\n      /len {{var::genOrderContent}}|\n      /var key=genOrderContent index={{pipe}} {{var::t}}|\n      /var key=t {{noop}}|\n    :}|\n    /find index=true {{var::workingList1}} {:\n      /test left={{var::item}} rule=eq right={{var::selected_btn}}|\n    :}|\n    /var key=workingIndex {{pipe}}|\n    /splice start={{var::workingIndex}} delete=1 {{var::workingList1}}|\n    /var key=workingList1 {{pipe}}|\n    /splice start={{var::workingIndex}} delete=1 {{var::workingList2}}|\n    /var key=workingList2 {{pipe}}|\n  :}|\n:}|","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":10,"icon":"","showLabel":false,"label":"Generator","title":"","message":"/* Setup before Selector QR\n//--------|\n/var key=do Yes|\n/var key=variableName \"\"|\n/ife ( {{var::variableName}} != '') {:\n\t/buttons labels=[\"Yes\", \"No\"] Do you want to redo redo {{var::varibleName}}|\n\t/var key=do {{pipe}}|\n:}|\n/ife ( do == 'Yes ) {:\n\t/var key=genKey \"\"|//The name of the Lorebook entry to load|\n\t/var key=genIsList Yes|//Yes or No|\n\t/var key=outputIsList Yes|//Yes or No|\n\t/var key=genIsSentence No|//Yes or No|\n\t/var key=contextKey {{noop}}|//The name of context template to use|\n\t\n\t\n\t/ife (outputIsList == 'Yes') {:\n\t\t/setvar as=array key={{var::variableName}} []|\n\t:}|\n\t/else {:\n\t\t/setvar as=string key={{var::variableName}} {{noop}}|\n\t:}|\n\t//[[Generate with Prompt]]|\n\t/:\"CMC Logic.Generator\"|\n\t\n\t/setvar key={{var::variableName}}  {{var::output}}|\n\t/ife ( '{{var::variableName}}' in databaseList){:\n\t\t/getvar key={{var::variableName}}|\n\t\t/db-add source=chat name={{var::variableName}} {{pipe}}|\n\t\t/db-disable source=chat {{var::variableName}}|\n\t:}|\n\t/else {:\n\t\t/getvar key={{var::variableName}}|\n\t\t/db-update source=chat name={{var::variableName}} {{pipe}}|\n\t\t/db-disable source=chat {{var::variableName}}|\n\t:}|\n\t/var key=context {{noop}}|\n\t/var key=examples {{noop}}|\n\t/var key=task {{pipe}}|\n\t/var key=instruct {{pipe}}|\n\t/var key=content {{pipe}}|\n:}|\n//--------|\n*|\n\n//SetTempVariables|\n/let key=do |\n/let key=variableName |\n/let key=wi_book |\n/let key=wi_book_key |\n/let key=combineLorebookEntries |\n/let key=inputIsList |\n/let key=outputIsList |\n/let key=needOutput |\n/let key=content |\n/let key=output |\n/let key=wi_temp |\n/let key=wi_input_entreis |\n/let key=wi_input_content |\n/let key=workingList1 |\n/let key=workingList2 |\n/let key=genOrder |\n/let key=genOrderContent |\n/let key=selected_btn |\n/let key=parcedInput |\n/let key=workingIndex |\n/let key=workingContent2 |\n/let key=genOrderindex |\n/let key=parce1 |\n/let key=parce2 |\n/let key=t |\n/let key=it |\n/let key=wi_uid |\n/let key=genState |\n/let key=isGeneration |\n/let key=tempList |\n/let key=actionType |\n/let key=man |\n/let key=genKey |\n/let key=genIsList |\n/let key=genIsSentence |\n/let key=contextKey |\n/let key=context |\n/let key=examples |\n/let key=task |\n/let key=instruct |\n/let key=ecT |\n/let key=epT |\n/let key=epP |\n/let key=eiT |\n/let key=eiP |\n/let key=add |\n/let key=lastId |\n/let key=mess |\n/let key=message |\n/let key=databaseList |\n/let key=qrList |\n/let key=typeGuide |\n//-----|\n\n\n\n/var key=wi_book \"CMC Generation Prompts\"|\n/ife ( contextKey != '') {:\n\t/findentry field=comment file={{var::wi_book}} {{var::contextKey}}: Context|\n\t/var key=wi_uid {{pipe}}|\n\t/ife ( wi_uid != '') {:\n\t\t/getentryfield field=content file={{var::wi_book}} {{var::wi_uid}}|\n\t\t/var key=context {{pipe}}|\n\t\t/ife ( real == 'Yes') {:\n\t\t\t/var key=context {{var::context}}{{var::realParced}}|\n\t\t:}|\n\t\t/var key=context {{var::context}}{{newline}}{{newline}}|\n\t:}|\n:}|\n\n/var key=examples {{noop}}|\n/findentry field=comment file={{var::wi_book}} {{var::genKey}}: Examples|\n/var key=wi_uid {{pipe}}|\n/ife ( wi_uid != '') {:\n\t/getentryfield field=content file={{var::wi_book}} {{var::wi_uid}}|\n\t/var key=examples {{pipe}}|\n:}|\n/findentry field=comment file={{var::wi_book}} {{var::genKey}}: Task|\n/var key=wi_uid {{pipe}}|\n/getentryfield field=content file={{var::wi_book}} {{var::wi_uid}}|\n/var key=task {{pipe}}|\n/findentry field=comment file={{var::wi_book}} {{var::genKey}}: Instruction|\n/var key=wi_uid {{pipe}}|\n/getentryfield field=content file={{var::wi_book}} {{var::wi_uid}}|\n/var key=instruct {{pipe}}|\n\n/var key=genState []|\n\n/var key=isGeneration 'Yes'|\n/var key=output {{noop}}|\n/var as=array key=tempList []|\n\n/ife ( outputIsList == 'Yes') {:\n\t/var key=actionType add|\n:}|\n/else {:\n\t/var key=actionType set|\n:}|\n/var key=man \"Manually {{var::actionType}}\"|\n\n/var key=ecT \"Edit Context(Temp)\"|\n/var key=epT \"Edit Prompt(Temp)\"|\n/var key=epP \"Edit Prompt(Perm)\"|\n/var key=eiT \"Edit Instruct(Temp)\"|\n/var key=eiP \"Edit Instruct(Perm)\"|\n\n/whilee ( output == '') {:\n\t/echo Generating {{var::genKey}}|\n\t/var key=genState []|\n\t/genraw \"{{var::context}}{{var::task}}{{newline}}{{newline}}{{var::instruct}}\"|\n\n\t/var key=t {{pipe}}|\n\t/reasoning-parse return=content {{var::t}}|\n\t/var key=t {{pipe}}|\n\t/ife (genIsList == 'Yes') {:\n\t\t/re-replace find=\"/\\./g\" replace=\"\" {{var::t}}|\n\t\t/var key=t {{pipe}}|\n\t\t/to-lower {{var::t}}|\n\t\t/var key=t {{pipe}}|\n\t\t/re-replace find=\"/\\b([a-z])/\" cmd=\"/to-upper $1\" replace=\"$1\" {{var::t}}|\n\t\t/var key=t {{pipe}}|\n\t\t/wait 1|\n\t\t/split find=\":\" {{var::t}}|\n\t\t/var key=genState {{pipe}}|\n\t:}|\n\t/else {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{var::t}}|\n\t:}|\n\n\t/ife ( (genKey == 'Time Period') and ( 'Modern Day' not in genState)) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} Modern Day|\n\t:}|\n\t/ife ((genIsList == 'Yes') and ( man not in genState)) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{var::man}}|\n\t:}|\n\n\t/ife ( 'Generate New' not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} Generate New|\n\t:}|\n\t/ife ( ecT not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{var::ecT}}|\n\t:}|\n\t/ife ( epT not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{var::epT}}|\n\t:}|\n\t/ife ( epP not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{var::epP}}|\n\t:}|\n\t/ife ( eiT not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{var::eiT}}|\n\t:}|\n\t/ife ( eiP not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{var::eiP}}|\n\t:}|\n\t/ife (('Done' not in genState) and (((outputIsList == 'Yes') and (tempList != '')) or (needOutput == 'No'))) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} \"Done\"|\n\t:}|\n  \n\t/buttons labels={{var::genState}} Select the {{var::genKey}} you want {{getvar:firstName}} to have.|\n\t/var key=selected_btn {{pipe}}|\n\n\n\n\t/ife ( selected_btn == ''){:\n\t\t/echo Aborting |\n\t\t/abort\n\t:}|\n\t/elseif ( selected_btn == man) {:\n\t\t/ife ( genIsSentence == 'Yes' ){:\n\t\t\t/getat index=0 {{var::genState}} |\n\t\t\t/input default={{pipe}} Edit the output to your liking.|\n\t\t:}|\n\t\t/else {:\n\t\t\t/ife (outputIsList == 'Yes') {:\n\t\t\t\t/input rows=8 What {{var::genKey}} do you like to add to the {{var::genKey}} list?|\n\t\t\t:}|\n\t\t\t/else {:\n\t\t\t\t/input rows=8 What {{var::genKey}} do you like to set as {{var::genKey}} list?|\n\t\t\t:}|\n\t\t:}|\n\t\t/var key=selected_btn {{pipe}}|\n\t\t/:SaveGen input={{var::selected_btn}}|\n\t:}|\n\t/elseif ( selected_btn == ecT) {:\n\t    /:textParse input=\"{{var::context}}\"|\n\t    /input labels={{pipe}} Edit the context temporarily.|\n\t    /var key=add {{pipe}}|\n\t    /ife ( add == ''){:\n\t\t\t/echo Aborting |\n\t\t\t/abort\n\t\t:}|\n\t    /else {:\n\t\t\t/:textParse input=\"{{var::add}}\"|\n\t\t\t/var key=context {{var::pipe}}|\n\t\t:}|\n\t:}|\n\t/elseif ( selected_btn == epT) {:\n\t    /:textParse input=\"{{getvar::prompt}}\"|\n\t    /input labels={{pipe}} Edit the prompt temporarily.|\n\t    /var key=add {{pipe}}|\n\t    /ife ( add == ''){:\n\t\t\t/echo Aborting |\n\t\t\t/abort\n\t\t:}|\n\t    /else {:\n\t\t\t/:textParse input=\"{{var::add}}\"|\n\t\t\t/var key=prompt {{pipe}}|\n\t\t:}|\n\t:}|\n\t/elseif ( selected_btn == eiT) {:\n\t    /:textParse input=\"{{var::instruct}}\"|\n\t    /input labels={{pipe}} Edit the instructions temporarily.|\n\t    /var key=add {{pipe}}|\n\t    /ife ( add == ''){:\n\t\t\t/echo Aborting |\n\t\t\t/abort\n\t\t:}|\n\t\t/else {:\n\t\t\t/:textParse input=\"{{var::add}}\"|\n\t\t\t/var key=instruct {{pipe}}|\n\t\t:}|\n\t:}|\n\t/elseif ( selected_btn == epP) {:\n\t\t/:textParse input=\"{{var::prompt}}\"|\n\t    /input default={{pipe}} How would you like to change the prompt permanently?|\n\t    /var key=add {{pipe}}|\n\t    /ife ( add == ''){:\n\t\t\t/echo Aborting |\n\t\t\t/abort\n\t    :}|\n\t    /else {:\n\t\t\t/findentry field=comment file={{var::wi_book}} {{var::genKey}}: Prompt|\n\t\t\t/var key=wi_uid {{pipe}}|\n\t\t\t/:textParse input=\"{{var::add}}\"|\n\t\t\t/var key=add {{pipe}}|\n\t\t\t/setentryfield file={{getvar::wi_book}} uid={{var::key=wi_uid}} {{pipe}}|\n\t\t\t/var key=prompt {{getvar::add}}|\n\t\t:}|\n\t:}|\n\t/elseif ( selected_btn == eiP) {:\n\t\t/:textParse input=\"{{var::instruct}}\"|\n\t    /input default={{pipe}} How would you like to change the instructions permanently?|\n\t    /var key=add {{pipe}}|\n\t    /ife ( add == ''){:\n\t\t\t/echo Aborting |\n\t\t\t/abort\n\t    :}|\n\t    /else {:\n\t\t\t/findentry field=comment file={{var::wi_book}} {{var::genKey}}: Instruction|\n\t\t\t/var key=wi_uid {{pipe}}|\n\t\t\t/:textParse input=\"{{var::add}}\"|\n\t\t\t/var key=add {{pipe}}|\n\t\t\t/setentryfield file={{var::wi_book}} uid={{var::key=wi_uid}} {{pipe}}|\n\t\t\t/var key=prompt {{var::add}}|\n\t    :}|\n\t:}|\n\t/else {:\n\t\t/ife (( genState == 'Done') and (((outputIsList == 'Yes') and (tempList == '')) or (needOutput == 'No'))) {:\n\t\t\t/:SaveGen input=\"None\"|\n\t\t:}|\n\t\t/else {:\n\t\t\t/:SaveGen input=\"{{var::selected_btn}}\"|\n\t\t:}|\n\t:}|\n:}|","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":12,"icon":"","showLabel":false,"label":"Selector","title":"","message":"/* Setup before Selector QR\n//--------|\n/var key=do Yes|\n/var key=variableName \"timePeriod\"|\n/ife ( {{var::variableName}} != '') {:\n\t/buttons labels=[\"Yes\", \"No\"] Do you want to redo redo {{getvar::varibleName}}|\n\t/var key=do {{pipe}}|\n:}|\n/ife ( do == 'Yes ) {:\n\t/var key=wi_book \"\"|//The Lorebook Name|\n\t/var key=wi_book_key {{noop}}|//The name of the entry to get|\n\t/var key=combineLorebookEntries No|//Combines the lorebook entries|\n\t/var key=inputIsList No|//Yes or No|\n\t/var key=outputIsList Yes|//Yes or No|\n\t/var key=needOutput Yes|//Yes or No|\n\t\n\t\n\t/ife ( inputIsList == 'Yes') {:\n\t\t/setvar key={{var::variableName}} []|\n\t\t/ife ( combineLorebookEntries == 'Yes') {:\n\t\t\t/:\"CMC Logic.Combine List Lorebooks\"\n\t\t:}|\n\t\t/foreach {{var::genOrder}} {:\n\t\t\t/var key=it {{var::item}}|\n\t\t\t/getat index={{var::index}} {{var::genOrderContent}}|\n\t\t\t/var key=content {{pipe}}|\n\t\t\t/:\"CMC Logic.Selector\"|\n\t\t\t/addvar key={{var::variableName}} {{var::output}}|\n\t\t:}|\n\t:}|\n\t/else {:\n\t\t/var key=it {{var::wi_book_key}}|\n\t\t/:\"CMC Logic.Selector\"|\n\t\t/setvar key={{getvar::variableName}} {{var::output}}|\n\t:}|\n\t/ife ( '{{var::variableName}}' in databaseList){:\n\t\t/getvar key={{var::variableName}}|\n\t\t/db-add source=chat name={{var::variableName}} {{pipe}}|\n\t\t/db-disable source=chat {{var::variableName}}|\n\t:}|\n\t/else {:\n\t\t/getvar key={{var::variableName}}|\n\t\t/db-update source=chat name={{var::variableName}} {{pipe}}|\n\t\t/db-disable source=chat {{var::variableName}}|\n\t:}|\n\t/var key=context {{noop}}|\n\t/var key=examples {{noop}}|\n\t/var key=task {{pipe}}|\n\t/var key=instruct {{pipe}}|\n\t/var key=content {{pipe}}|\n:}|\n//-------|\n*|\n\n/ife ( combineLorebookEntries != 'Yes) {:\n\t/ife (( inputIsList == 'Yes') and (wi_book_key is list)) {:\n\t\t/findentry field=comment file={{var::wi_book}} {{var::it}}|\n\t\t/var key=wi_uid {{pipe}}|\n\t\t/getentryfield field=content file={{var::wi_book}} {{var::wi_uid}}|\n\t:}|\n\t/else {:\n\t\t/findentry field=comment file={{var::wi_book}} {{var::wi_book_key}}: List|\n\t\t/var key=wi_uid {{pipe}}|\n\t\t/getentryfield field=content file={{var::wi_book}} {{var::wi_uid}}|\n\t:}|\n\t/var key=genState {{pipe}}|\n:}|\n/else {:\n\t/var key=genState {{var::content}}|\n:}|\n/split find=\":\" {{var::genState}}|\n/var as=array key=genState {{pipe}}|\n\n/var key=isGeneration 'No'|\n/var key=output {{noop}}|\n/var as=array key=tempList []|\n\n/ife ( outputIsList == 'Yes') {:\n\t/var key=actionType add|\n:}|\n/else {:\n\t/var key=actionType set|\n:}|\n/var key=man \"Manually {{var::actionType}}\"|\n\n/whilee ( output == '') {:\n\t\n\t/ife ( 'Random' not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} \"Ramdom\"|\n\t:}|\n\t/ife ( man not in genState) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} {{getvar::man}}|\n\t:}|\n\t/ife (('Done' not in genState) and (((outputIsList == 'Yes') and (tempList != '')) or (needOutput == 'No'))) {:\n\t\t/len {{var::genState}}|\n\t\t/var key=genState index={{pipe}} \"Done\"|\n\t:}|\n\t/buttons lable={{var::genState}} Select the {{var::it}} you want to use.|\n\t/var key=selected_btn {{pipe}}|\n\t\n\t/ife ( selected_btn == ''){:\n\t\t/echo Aborting |\n\t\t/abort\n\t:}|\n\t/elseif (selected_btn == 'Random') {:\n\t\t/find index=true {{var::genState}} {:\n\t        /test left={{var::item}} rule=eq var=\"Random\"|\n\t\t:}|\n\t\t/slice start=0 end={{pipe}} {{var::genState}}|\n\t\t/pick items=1 {{var::genState}}|\n\t\t/var key=selected_btn {{pipe}}|\n\t\t/:SaveGen input=\"{{var::selected_btn}}\"|\n\t:}|\n\t/elseif ( selected_btn == man) {:\n\t\t/ife ( genIsSentence == 'Yes' ){:\n\t\t\t/getat index=0 {{var::genState}}|\n\t\t\t/input default={{pipe}} Edit the output to your liking.|\n\t\t:}|\n\t\t/else {:\n\t\t\t/ife (outputIsList == 'Yes') {:\n\t\t\t\t/input rows=8 What {{var::genKey}} do you like to add to the {{var::genKey}} list?|\n\t\t\t:}|\n\t\t\t/else {:\n\t\t\t\t/input rows=8 What {{var::genKey}} do you like to set as {{var::genKey}} list?|\n\t\t\t:}|\n\t\t:}|\n\t\t/var key=selected_btn {{pipe}}|\n\t\t/:SaveGen input=\"{{var::selected_btn}}\"|\n\t:}|\n\t/else {:\n\t\t/ife (( genState == 'Done') and (((outputIsList == 'Yes') and (tempList == '')) or (needOutput == 'No'))) {:\n\t\t\t/:SaveGen input=\"None\"|\n\t\t:}|\n\t\t/else {:\n\t\t\t/:SaveGen input=\"{{var::selected_btn}}\"|\n\t\t:}|\n\t:}|\n:}|","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":14,"icon":"","showLabel":false,"label":"Parse","title":"","message":"/re-replace find=\"/\\b{{char}}\\b\\|--FirstName--/g\" replace=\"{\\\\\\\\{char}}\" {{getvar::t}}|\n/re-replace find=\"/\\b{{user}}\\b\\|--User--/g\" replace=\"{\\\\\\{user}}\" {{pipe}}|\n/return {{pipe}}|","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""}],"idIndex":14}