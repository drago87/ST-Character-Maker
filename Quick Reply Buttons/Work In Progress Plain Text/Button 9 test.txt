/setvar key=catgen "Interaction Style"|
/setvar key=genid "9"|


//setvar key=swipe Yes|

/:"Character Maker V4.Get Char info"|



/setvar key=genState Redo|

/while left=genState right=Redo rule=eq {:
	/echo Generating Speach Pattern|
    /setvar key=genState []|  
	
	/setvar key=system {{noop}}|
	/setvar key=prompt {{noop}}|
	/setvar key=instruct {{noop}}|
	
	//Button 09 - 01|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 258|
	/setvar key=system {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 259|
	/setvar key=prompt {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 260|
	/setvar key=instruct {{pipe}}|
	
   /genraw lock=on name={{char}} 
	system="{{getvar::system}}"
{{getvar::prompt}}
{{getvar::instruct}}|
	
	
	
	
    /addvar key=genState {{pipe}}|
    /addvar key=genState Edit|  
    /addvar key=genState Redo|  

    /buttons labels={{getvar::genState}} Is this a good speach pattern for {{getvar::fname}}?|
	
    /setvar key=selected_btn {{pipe}}|
    /ife {: /test left=selected_btn right="" rule=eq :}|
		/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}||
    /elseif {: /test left={{getvar::selected_btn}} right=Edit rule=eq :}|
		/then {:
			/getvar key=genState index=0 | /setvar key=t {{pipe}}|
			/input rows=8 default={{getvar::t}} Edit {{getvar::fname}} Spech pattern.|
			/setvar key=selected_btn {{pipe}}|
			/ife {: /test left=selected_btn right="" rule=eq :}| 
				/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}|
		:}|

    /elseif {: /test left={{getvar::selected_btn}} right=Redo rule=eq :}|
		/then {:
			/setvar key=genState Redo|
		:}|
:}|
/setvar key=sp {{getvar::selected_btn}}|



/setvar key=genState Redo|

/while left=genState right=Redo rule=eq {:
	/echo Generating Dialect|
    /setvar key=genState []|  
	
	/setvar key=system {{noop}}|
	/setvar key=prompt {{noop}}|
	/setvar key=instruct {{noop}}|
	
	//Button 09 - 02|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 262|
	/setvar key=system {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 263|
	/setvar key=prompt {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 264|
	/setvar key=instruct {{pipe}}|
	
    /genraw lock=on name={{char}} 
	system="{{getvar::system}}"
{{getvar::prompt}}
{{getvar::instruct}}|
	
	
	/setvar key=spli {{pipe}}|
	/re-replace replace="" find="/\./g" var=spli | /setvar key=spli {{pipe}}|
	/split var=spli|
	
    /setvar key=genState {{pipe}}|
    /addvar key=genState "Add Dialect"|  
    /addvar key=genState Redo|  

    /buttons labels={{getvar::genState}} Select the dialect you want {{getvar::fname}} to have.|

    /setvar key=selected_btn {{pipe}}|

    /ife {: /test left=selected_btn right="" rule=eq :}|
		/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}||
    /elseif {: /test left={{getvar::selected_btn}} right="Add Dialect" rule=eq :}|
		/then {:
			
			/input rows=8 Add the dielact you want {{getvar::fname}} to have. |
			/setvar key=selected_btn {{pipe}}|
			/ife {: /test left=selected_btn right="" rule=eq :}|
				/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}|
		:}|

    /elseif {: /test left={{getvar::selected_btn}} right=Redo rule=eq :}|
		/then {:
			/setvar key=genState Redo|
		:}|
:}|
/setvar key=dil {{getvar::selected_btn}}|



/setvar key=genState Redo|

/while left=genState right=Redo rule=eq {:
	/echo Generating {{getvar::fname}}'s {{getvar::dil}} dialect example.|
    /setvar key=genState []|  
	
	/setvar key=system {{noop}}|
	/setvar key=prompt {{noop}}|
	/setvar key=instruct {{noop}}|
	
	//Button 09 - 03|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 266|
	/setvar key=system {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 267|
	/setvar key=prompt {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 268|
	/setvar key=instruct {{pipe}}|
	
    system="{{getvar::system}}"
{{getvar::prompt}}
{{getvar::instruct}}|
	
	
	
	
    /addvar key=genState {{pipe}}|
    /addvar key=genState Edit|  
    /addvar key=genState Redo|  

    /buttons labels={{getvar::genState}} Is this a good reprencentation of {{getvar::fname}}'s dialect? |

    /setvar key=selected_btn {{pipe}}|

    /ife {: /test left=selected_btn right="" rule=eq :}|
		/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}||
    /elseif {: /test left={{getvar::selected_btn}} right=Edit rule=eq :}|
		/then {:
			/getvar key=genState index=0 | /setvar key=t {{pipe}}|
			/input rows=8 default={{getvar::t}} Edit the example of {{getvar::fname}}'s dielact.|
			/setvar key=selected_btn {{pipe}}|
			/ife {: /test left=selected_btn right="" rule=eq :}|
				/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}|
		:}|

    /elseif {: /test left={{getvar::selected_btn}} right=Redo rule=eq :}|
		/then {:
			/setvar key=genState Redo|
		:}|
:}|
/setvar key=diaex {{getvar::selected_btn}}|



/setvar key=genState Redo|

/while left=genState right=Redo rule=eq {:
	/echo Generating Catchphrase|
    /setvar key=genState []|  
	
	/setvar key=system {{noop}}|
	/setvar key=prompt {{noop}}|
	/setvar key=instruct {{noop}}|
	
	//Button 09 - 04|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 270|
	/setvar key=system {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 271|
	/setvar key=prompt {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 272|
	/setvar key=instruct {{pipe}}|
	
    /genraw lock=on name={{char}} 
	system="{{getvar::system}}"
{{getvar::prompt}}
{{getvar::instruct}}|
	
	
	
	
    /addvar key=genState {{pipe}}|
    /addvar key=genState Edit|  
    /addvar key=genState Redo|  

    /buttons labels={{getvar::genState}} Is this a good Catchphrase for {{getvar::fname}}?|

    /setvar key=selected_btn {{pipe}}|

    /ife {: /test left=selected_btn right="" rule=eq :}|
		/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}||
    /elseif {: /test left={{getvar::selected_btn}} right=Edit rule=eq :}|
		/then {:
			/getvar key=genState index=0 | /setvar key=t {{pipe}}|
			/input rows=8 default={{getvar::t}} Edit the Catchphrase to your liking. |
			/setvar key=selected_btn {{pipe}}|
			/ife {: /test left=selected_btn right="" rule=eq :}|
			/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}|
		:}|

    /elseif {: /test left={{getvar::selected_btn}} right=Redo rule=eq :}|
		/then {:
			/setvar key=genState Redo|
		:}|
:}|
/setvar key=catchp {{getvar::selected_btn}}|



/setvar key=genState Redo|
/setvar key=outputString {{noop}}|

/while left=genState right=Redo rule=eq {:
	/echo Generating Common words|
    /setvar key=genState []|  
	
	/setvar key=system {{noop}}|
	/setvar key=prompt {{noop}}|
	/setvar key=instruct {{noop}}|
	
	//Button 09 - 05|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 274|
	/setvar key=system {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 275|
	/setvar key=prompt {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 276|
	/setvar key=instruct {{pipe}}|
	
    /genraw lock=on name={{char}} 
	system="{{getvar::system}}"
{{getvar::prompt}}
{{getvar::instruct}}|

	/setvar key=t {{pipe}}|
	/re-replace replace="" find="/\./g" var=t | /setvar key=t {{pipe}}|
	/split var=t | 
	/setvar key=genState {{pipe}}|
    /addvar key=genState "Manually add to List"|
	/addvar key=genState Done|
    /addvar key=genState Redo|  

    /buttons labels={{getvar::genState}} Select the Vocal sound you want {{getvar::fname}} to use.|

    /setvar key=selected_btn {{pipe}}|

    /ife {: /test left=selected_btn right="" rule=eq :}|
		/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}||
    /elseif {: /test left={{getvar::selected_btn}} right="Manually add to List" rule=eq :}|
		/then {:
			
			/input rows=8 Add a Vocal sound you want {{getvar::fname}} to use.(\"sound\") |
			/setvar key=t {{pipe}}|
			/setvar key=genState Redo|
			/ife {: /test left=t right="" rule=eq :}|
				/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}||
			/elseif {: /test left={{getvar::outputString}} right="" rule=neq :}|
            /then {:
                /addvar key=outputString ", {{getvar::t}}"|
            :}|
            /else {:
                /setvar key=outputString {{getvar::t}}|
            :}|
		:}|
	/elseif {: /test left={{getvar::selected_btn}} right=Done rule=eq :}|
		/then {::}|
	/elseif {: /test left={{getvar::selected_btn}} right=Redo rule=neq :}|
		/then {:
			/ife {: /test left={{getvar::outputString}} right="" rule=neq :}|
				/then {:
					/addvar key=outputString ", {{getvar::selected_btn}}"|
					/setvar key=genState Redo
				:}|
				/else {:
					/setvar key=outputString {{getvar::selected_btn}}|
					/setvar key=genState Redo
				:}|
		:}|
	/else  {: /setvar key=genState Redo :}|
	:}|
:}|
/setvar key=comwords {{getvar::outputString}}|



/setvar key=genState Redo|

/while left=genState right=Redo rule=eq {:
	/echo Generating Behavior in Conversations|
    /setvar key=genState []|  
	
	/setvar key=system {{noop}}|
	/setvar key=prompt {{noop}}|
	/setvar key=instruct {{noop}}|
	
	//Button 09 - 06|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 278|
	/setvar key=system {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 279|
	/setvar key=prompt {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 280|
	/setvar key=instruct {{pipe}}|
	
    /genraw lock=on name={{char}} 
	system="{{getvar::system}}"
{{getvar::prompt}}
{{getvar::instruct}}|
	
	
	
	
    /addvar key=genState {{pipe}}|
    /addvar key=genState Edit|  
    /addvar key=genState Redo|  

    /buttons labels={{getvar::genState}} Is this a good description of how {{getvar::fname}} interact with others. |

    /setvar key=selected_btn {{pipe}}|

    /ife {: /test left=selected_btn right="" rule=eq :}|
		/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}||
    /elseif {: /test left={{getvar::selected_btn}} right=Edit rule=eq :}|
		/then {:
			/getvar key=genState index=0 | /setvar key=t {{pipe}}|
			/input rows=8 default={{getvar::t}} Edit the description of how {{getvar::fname}} interacts with others. |
			/setvar key=selected_btn {{pipe}}|
			/ife {: /test left=selected_btn right="" rule=eq :}|
			/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}|
		:}|

    /elseif {: /test left={{getvar::selected_btn}} right=Redo rule=eq :}|
		/then {:
			/setvar key=genState Redo|
		:}|
:}|
/setvar key=behavior  {{getvar::selected_btn}}|



/setvar key=genState Redo|
/setvar key=outputString {{noop}}|
/setvar key=skip {{noop}}|

/while left=genState right=Redo rule=eq {:
	/echo Generating {{getvar::fname}}'s Preferred subject|
    /setvar key=genState []|  
	
	/setvar key=system {{noop}}|
	/setvar key=prompt {{noop}}|
	/setvar key=instruct {{noop}}|
	
	//Button 09 - 07|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 282|
	/setvar key=system {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 283|
	/setvar key=prompt {{pipe}}|
	/getentryfield file="Character Maker Combined NSFW GenRaw" 284|
	/setvar key=instruct {{pipe}}|
	
    /genraw lock=on name={{char}} 
	system="{{getvar::system}}"
{{getvar::prompt}}
{{getvar::instruct}}|
	
	
	/addvar key=genState {{pipe}}|
    /addvar key=genState "Manually add to List"|
	/addvar key=genState Done|
    /addvar key=genState Redo|  
	/setvar key=skip "Avoid using these subjects in your reply: "|
	
    /buttons labels={{getvar::genState}} Is this a subject {{getvar::fname}} enjoys discussing?|

    /setvar key=selected_btn {{pipe}}|
	/getvar key=genState index=0| /setvar key=temp {{pipe}}|
	/re-replace replace="" find="/\./" var=selected_btn | /setvar key=selected_btn|
    /ife {: /test left=selected_btn right="" rule=eq :}|
		/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}|
    /elseif {: /test left={{getvar::selected_btn}} right="Manually add to List" rule=eq :}|
		/then {:
			
			/input rows=8 Manually add this subject.|
			/setvar key=t {{pipe}}|
			/setvar key=genState Redo|
			/ife {: /test left=t right="" rule=eq :}|
				/then {: /:"Character Maker V4.Flushvar"| /echo Aborting | /abort :}|
			/elseif {: /test left={{getvar::outputString}} right="" rule=neq :}|
            /then {:
                /addvar key=outputString ", {{getvar::t}}"|
            :}|
            /else {:
                /setvar key=outputString {{getvar::t}}|
				
            :}|
			/addvar key=skip {{getvar::outputString}}, {{getvar::temp}}|
			
		:}|
	/elseif {: /test left={{getvar::selected_btn}} right=Done rule=eq :}|
		/then {::}|
	/elseif {: /test left={{getvar::selected_btn}} right=Redo rule=neq :}|
		/then {:
			/ife {: /test left={{getvar::outputString}} right="" rule=neq :}|
				/then {:
					/addvar key=outputString ", {{getvar::selected_btn}}"|
					/setvar key=genState Redo
				:}|
				/else {:
					/setvar key=outputString {{getvar::selected_btn}}|
					/setvar key=genState Redo
				:}|
				/addvar key=skip {{getvar::outputString}}, {{getvar::temp}}|
		:}|
	/else {:
		/ife {: /test left={{getvar::outputString}} right="" rule=neq :}|
			/then {: 
				/addvar key=skip {{getvar::outputString}}, {{getvar::temp}}|
			:}|
		/else {:
			/addvar key=skip {{getvar::temp}}|
		:}|
		/setvar key=genState Redo|
	:}|
		
	:}|
:}|
/setvar key=subj {{getvar::outputString}}|

/setvar key=output "<h2 align='center'>{{getvar::catgen}}</h2>

Speach Pattern: {{getvar::sp}}

Dialect: {{getvar::dil}}

Dialect Example: {{getvar::diaex}}

Catchphrase: {{getvar::catchp}}

Common Words:"|

/setvar key=temp {{noop}}|
/setvar key=temp2 []|
/wait 1|
/split var=comwords | /setvar key=t {{pipe}}|
/foreach var=t {:
	/setvar key=t1 {{item}}|
	
	/while left=t1 right="\"" rule=in {:
		/setvar key=a {{getvar::t1}}|
		/re-replace find="/\"/" replace="" key=t1 | /setvar key=t1 {{pipe}}|
		
	:}|
	/addvar key=temp2 {{getvar::t1}}|
	/ife {: /test left={{index}} right=0 rule=eq :}|
		/then {:
			/addvar key=temp \"{{getvar::t1}}"|
		:}|
		/else {:/addvar key=temp , "{{getvar::t1}}" :}|
:}|


/addvar key=output " {{getvar::temp}}

Behavior in Conversations: {{getvar::behavior}}

Preferred Topics: {{getvar::subj}}"|

/message-edit message={{lastMessageId}} {{getvar::output}}